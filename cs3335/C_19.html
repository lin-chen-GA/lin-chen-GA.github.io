<!DOCTYPE html>
<html>
	<head>
		<title>C</title>
		<link rel="stylesheet" href="../css/atelier-sulphurpool-light.css" type="text/css">
		<script src="../js/google-code-prettify/run_prettify.js?autoload=true&amp;lang=css"></script>
		<style>
			div.title {color: navy; font-weight: bold; width: 80%; font-size: 32px; text-align: center; position: relative; margin: auto;}
			div.subtitle {color: navy; font-weight: bold; width: 80%; font-size: 24px; text-align: position: relative; margin: auto;}
			div.block {color: navy; font-weight: bold; width: 80%; border-style: solid; padding: 5px; position: relative; margin: 10px auto; border-radius: 5px;}
			span {color: red; font-weight: bold;}
		</style>
	</head>
	<body>
		<div class = "title">
			IO
		</div>

		<div class = "subtitle">Write into a File with Redirection</div>
		<div class = "block">
		<pre class = "prettyprint linenums">
#include &lt;stdio.h&gt;

int main()
{
	printf("Hello World!\n");

	return 0;
}
		</pre>
		<pre class = "prettyprint linenums">
gcc hello.c
./a.out &gt; output.txt // redirect outputs to a file
./a.out &gt;&gt; output.txt // attach outputs to the exist file, if the file does not exist, create it
		</pre>
		</div>
		<div class = "subtitle">Write into a File</div>
		<div class = "block">
		<pre class = "prettyprint linenums">
#include &lt;stdio.h&gt;

int main()
{
	FILE * fp; // define a file pointer
	fp = fopen ("info.txt", "w"); // open a file with writing mode

	// exit program if the file cannot be openned
	if (fp == NULL)
        	exit(EXIT_FAILURE);

	// write into file
	fprintf(fp, "%10s: %10d\n", "Lin Chen", 800);
	fprintf(fp, "%10s: %10s\n", "Office", "2205");

	fclose(fp);

	return 0;
}
		</pre>
		</div>
		<div class = "subtitle">Read a File Line by Line</div>
		<div class = "block">
		<pre class = "prettyprint linenums">
// letters.txt
abcdefg
hijklmn
opqrstu
vwxyz
		</pre>
		<pre class = "prettyprint linenums">
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main()
{
	FILE* filePointer; // define a file pointer

	// create an array to save the string
	int bufferLength = 255;
	char *buffer = (char *)malloc(bufferLength*sizeof(char));

	// open the file
	filePointer = fopen("letters.txt", "r");

	// exit program if the file cannot be openned
	if (filePointer == NULL)
        	exit(EXIT_FAILURE);

	// read file line by line
	while(fgets(buffer, bufferLength, filePointer)) {
	     	printf("%s\n", buffer);
	}

	// close file
	fclose(filePointer);

	return 0;
}
		</pre>
		</div>
		<div class = "subtitle">Parameters to C Program</div>
		<div class = "block">
		<pre class = "prettyprint linenums">
		</pre>
		</div>
		<div class = "subtitle">Standard Files</div>
		<div class = "block">
			<li>stdin, keyboard</li>
			<li>stdout, screen</li>
			<li>stderr, screen</li>
		<pre class = "prettyprint linenums">
		</pre>
		</div>
		<div class = "block">
			<p style = "text-align:center;"><img src = "img/CS3335_29.png" width = "30%"></p>
		</div>
		<div class = "block">
		<pre class = "prettyprint linenums">
#include &lt;stdio.h&gt;

int main()
{
	char str[100];

	printf("Enter a string: \n");

	scanf("%s", str); // read the first token

	printf("%s\n", str);

	return 0;
}

//Hello World
//Hello
		</pre>
		</div>
		<div class = "block">
		<pre class = "prettyprint linenums">
#include &lt;stdio.h&gt;

int main()
{
	char str[100];

	printf("Enter a string:\n");

	fgets(str, sizeof(str), stdin); // read the whole line
	printf("%s\n", str);

	return 0;
}

//Hello World
//Hello World
//
		</pre>
		</div>
		<div class = "subtitle">String with Pointer</div>
		<div class = "block">
		<pre class = "prettyprint linenums">
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

char *getString()
{
	char *str = "Hello World";

	return str;
}

int main()
{
	char *str = getString();

	printf("Length: %lu\n", strlen(str)); // 5
	printf("String: %s\n", str);

	return 0;
}
		</pre>
		</div>
		<div class = "block">
		<pre class = "prettyprint linenums">
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

char *getString()
{
	char *str = (char *) malloc(100*sizeof(char));
	scanf("%s", str); // read the first token

	return str;
}

int main()
{
	char *str = getString();

	printf("Length: %lu\n", strlen(str)); // 5
	printf("String: %s\n", str);

	free(str);

	return 0;
}

//Hello World
//Hello
		</pre>
		</div>
		<div class = "block">
		<pre class = "prettyprint linenums">
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

char *getString()
{
	char *str = (char *) malloc(100*sizeof(char));
	fgets(str, 100, stdin);

	return str;
}

int main()
{
	char *str = getString();

	printf("Length: %lu\n", strlen(str)); // 5
	printf("String: %s\n", str);

	free(str);

	return 0;
}

//Hello World
//Hello World
//
		</pre>
		</div>
		<div class = "subtitle"><span>Exercise 1</span></div>
		<div class = "block">
			<li>Read a string from the keyboard, conver it to uppercase string</li>
			<li>Converted uppercase string do not contain \n character</li>
			<li>Hint: toupper function is defined in <a href = "https://www.tutorialspoint.com/c_standard_library/ctype_h.htm">ctype.h</a></li>
		<pre class = "prettyprint linenums">
#include &lt;ctype.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

char *getString()
{
	// add your code here
}

char *toUpper(char *str)
{
	// add your code here
}

int main()
{
	char *str = getString();

	char *strUpper = toUpper(str);

	printf("%s\n", strUpper);

	free(str);
	free(strUpper);

	return 0;
}
		</pre>
		</div>
		<div class = "subtitle">string.h</div>
		<div class = "block">
		<pre class = "prettyprint linenums">
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

int main()
{
	char *str1 = "Hello";
	char *str2 = "Hello";
	char *str3 = "World";

	// strlen
	printf("Length: %lu\n", strlen(str1)); // 5

	// strcmp
	// equal, 0; less than, negative integer; greater than, positive integer
	printf("Compare: %d\n", strcmp(str1, str2)); // 0
	printf("Compare: %d\n", strcmp(str1, str3)); // -15
	//printf("String: %s\n", str);
	
	// memcpy
	char *str4 = (char *)malloc(strlen(str1)+1);
	memcpy(str4, str1, strlen(str1)+1);
	printf("Copy: %s\n", str4);

	// strcat
	char *str5 = (char *)malloc(strlen(str1)+strlen(str3)+1);
	memcpy(str5, str1, strlen(str1));
	strcat(str5, str3); // append str2 to str1
	printf("Concatnate: %s\n", str5); // HelloWorld

	// sub string
	char *str6 = (char *) malloc(3);
	memcpy(str6, &amp;str5[5], 2);
	str6[2] = '\0';
	printf("Substring: %s\n", str6); // Wo

	return 0;
}
		</pre>
		</div>
		<div class = "subtitle"><span>Exercise 2</span></div>
		<div class = "block">
			<li>Enter an positive integer number, check if it is palindrome</li>
		<pre class = "prettyprint linenums">
// main.c
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
int main()
{
	char *s1 = getString();
	char *s2 = reverse(s1);

	if(isPalindrome(s1, s2))
		printf("%s is palindrome\n", s1);
	else
		printf("%s is not a palindrome\n", s1);

	free(s1);
	free(s2);

	return 0;
}

// 121
// 121 is palindrome

// 123
// 123 is not a palindrome
		</pre>
		</div>
		<div class = "subtitle">Type Casting</div>
		<div class = "block">
		<pre class = "prettyprint linenums">
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int getInteger()
{
	printf("Enter an integer number:\n");
	char str[100];
	scanf("%s", str); // read the first token

	return atoi(str);
}

double getDouble()
{
	printf("Enter a double number:\n");
	char *str = (char *) malloc(100*sizeof(char));
	scanf("%s", str); // read the first token

	double num = atof(str);

	free(str);

	return num;
}

int main()
{
	int age = getInteger();

	double pi = getDouble();

	printf("%d\n", age);
	printf("%f\n", pi);

	return 0;
}
		</pre>
		</div>
		<div class = "subtitle"><span>Exercise 3</span></div>
		<div class = "block">
			<li>Enter an positive integer number n from the keyboard, calculate the summation from 1 to n</li>
		</div>
		<div class = "subtitle">Change String</div>
		<div class = "block">
		<pre class = "prettyprint linenums">
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main()
{
	// type 1
	// pointer
	// constant char array, controled by system, do not need to be freed manually
	char * str = "Hello";

	//str[0] = 'W'; // bus error
	str = "World";
	printf("%s\n", str); //World

	// type 2
	// array
	char str2 [] = "Hello";
	str2[0] = 'W';
	//str2 = "World"; // not allowed
	printf("%s\n", str2); //Wello

	// type 3
	// pointer allocated by malloc, need to release memory allocated by free

	return 0;
}
		</pre>
		</div>
		<div class = "subtitle">Reference</div>
		<div class = "block">
			<li><a href = "https://www.tutorialspoint.com/c_standard_library/string_h.htm">string.h</a></li>
		</div>
		<div class = "subtitle"><a href = "C_18_S.html">Solution</a></div>
	</body>
</html>
